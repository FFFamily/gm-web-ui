# 后台「用户体系」前端页面清单（基础版）

> 依据：`doc/user-system-feature-list.md`
>
> 目的：给前端做路由/页面骨架生成与权限点绑定用。

## 0. 登录与基础框架

1) 登录页
- 路由：`/admin/login`
- 表单：用户名、密码
- 成功：保存 token（Sa-Token token-name：`satoken`，参考后端配置），跳转首页
- 失败：统一提示“用户名或密码错误”（不区分用户不存在/密码错误）

2) 布局/权限基座（建议作为工程骨架一并生成）
- 顶部/侧边栏布局
- 路由守卫：未登录跳转 `/login`
- 权限指令/组件：根据 `perm_code` 控制菜单、按钮显示与可用

## 1. 用户管理

3) 用户列表页
- 路由：`/admin/users`
- 功能：分页、关键字搜索（username/displayName）、enabled 筛选
- 操作按钮（按权限控制）：
  - 查看详情（`user:read`）
  - 新增用户（`user:create`）
  - 编辑用户（`user:update`）
  - 重置密码（`user:reset_password`）

4) 用户新增页（或弹窗）
- 路由：`/admin/users/new`（或列表页弹窗）
- 表单：username、displayName、初始密码、enabled、角色选择（多选 roleCodes）
- 提交：创建成功返回详情/回列表

5) 用户编辑页（或弹窗）
- 路由：`/admin/users/:id/edit`（或详情页/列表页弹窗）
- 表单：displayName、enabled、角色选择（多选 roleCodes）

6) 用户详情页
- 路由：`/admin/users/:id`
- 展示：基本信息 + 角色列表 + lastLoginAt/createdAt/updatedAt
- 操作：编辑、重置密码（按权限）

7) 重置密码结果页/弹窗（建议弹窗）
- 触发：用户列表/详情页 “重置密码”
- 展示：临时密码（一次性展示、复制按钮），提示管理员线下转交用户

## 1.1 前台用户管理（管理后台内）

> 管理后台增加一套“前台用户（Account）”管理列表，与“后台用户（SysUser）”并列展示在【用户管理】菜单下。

7.1) 前台用户列表页
- 路由：`/admin/accounts`
- 功能：分页、关键字搜索（username/displayName）、enabled 筛选
- 操作（按权限控制）：
  - 启用/禁用（`account:update`）
  - 重置密码（`account:reset_password`）

## 2. 角色与权限

8) 角色列表页
- 路由：`/admin/roles`
- 功能：分页
- 操作按钮（按权限控制）：
  - 查看详情（`role:read`）
  - 新增角色（`role:create`）
  - 编辑角色（`role:update`）
  - 删除角色（`role:delete`，`ADMIN` 角色前端建议置灰/隐藏）

9) 角色新增页（或弹窗）
- 路由：`/admin/roles/new`
- 表单：roleCode、roleName

10) 角色编辑页（或弹窗）
- 路由：`/admin/roles/:id/edit`
- 表单：roleName（roleCode 通常只读）

11) 角色详情页（含绑定权限）
- 路由：`/admin/roles/:id`
- 展示：roleCode、roleName、已绑定 permCodes
- 操作：绑定权限（`role:bind_permissions`）
  - 建议 UI：权限树/分组多选（数据源来自“权限点列表”接口）

12) 权限点列表页（只读）
- 路由：`/admin/permissions`
- 功能：列表展示 permCode、permName（可加搜索但非必须）

## 3. 审计日志

13) 审计日志列表页
- 路由：`/admin/audits`
- 功能：分页 + 筛选（actorUserId、action、targetType、时间范围 startAt/endAt）
- 展示字段：actorUserId、action、targetType、targetId、result、ip、ua、requestId、createdAt
- 详情弹窗（建议）：展示 detailJson（格式化 JSON）

## 4. 菜单建议（对应权限点）

- 用户管理（`user:list`）
- 角色管理（`role:list`）
- 权限点（`permission:list`）
- 审计日志（`audit:list`）

## 5. 前台 Account（无权限）

> 前台账号与后台管理员账号是两套体系：Account 不做权限点控制，仅做登录与查看自身信息。

14) 前台账号登录页
- 路由：`/account/login`
- 表单：用户名、密码
- 成功：保存 Account token（建议 localStorage key：`satoken_account`），跳转 `/account`
- 失败：统一提示“用户名或密码错误”

15) 前台账号个人中心/我的账号
- 路由：`/account/me`
- 展示：当前账号信息（id/username/displayName）
- 操作：
  - 编辑并保存基本信息（displayName）
  - 退出登录（清理 Account token，跳转 `/account/login`）

16) 前台账号注册页
- 路由：`/account/register`
- 表单：用户名、密码、确认密码、昵称（可选）
- 成功：注册后自动登录，跳转 `/account/me`（或前台首页 `/`）
